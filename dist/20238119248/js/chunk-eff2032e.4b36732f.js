(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eff2032e"],{"58bd":function(t,n,e){},8295:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this;t._self._c;return t._m(0)},i=[function(){var t=this,n=t._self._c;return n("div",{staticStyle:{width:"600px",height:"400px","z-index":"999"}},[n("div",{staticClass:"playWnd",attrs:{id:"playWnd"}})])}],s={name:"RtspLiveVideo",components:{},data:function(){return{videoUrlList:[],pubKey:"",initCount:0,oWebControl:null}},computed:{},watch:{},mounted:function(){this.getUrl()},beforeDestroy:function(){this.handleClose()},methods:{getPubKey:function(t){this.oWebControl.JS_RequestInterface({funcName:"getRSAPubKey",argument:JSON.stringify({keyLength:1024})}).then((function(n){n.responseMsg.data&&(this.pubKey=n.responseMsg.data,t())}))},showCBInfo:function(t,n){},setCallbacks:function(){var t=this;this.oWebControl.JS_SetWindowControlCallback({cbIntegrationCallBack:t.cbIntegrationCallBack})},cbIntegrationCallBack:function(t){this.showCBInfo(JSON.stringify(t.responseMsg))},startPreview:function(){var t=this,n=JSON.stringify({list:this.videoUrlList});this.oWebControl.JS_RequestInterface({funcName:"startMultiPreview",argument:n}).then((function(n){t.showCBInfo(JSON.stringify(n?n.responseMsg:""))}))},initVideo:function(){var t=this;this.oWebControl.JS_RequestInterface({funcName:"init",argument:JSON.stringify({playMode:0,snapDir:"d:\\SnapDir",videoDir:"d:\\VideoDir",layout:"2x2",showToolbar:1,showIntelligent:1,buttonIDs:"0,16,256,257,258"})}).then((function(n){t.showCBInfo(JSON.stringify(n?n.responseMsg:"")),t.oWebControl.JS_Resize(600,420),t.startPreview()}))},initPlugin:function(){var t=this;this.oWebControl=new WebControl({szPluginContainer:"playWnd",iServicePortStart:15900,iServicePortEnd:15909,cbConnectSuccess:function(){t.setCallbacks(),t.oWebControl.JS_StartService("window",{dllPath:"./VideoPluginConnect.dll"}).then((function(){t.oWebControl.JS_CreateWnd("playWnd",600,420).then((function(){t.initVideo()}))}),(function(){}))},cbConnectError:function(){t.oWebControl=null,WebControl.JS_WakeUp("VideoWebPlugin://"),t.initCount++,t.initCount<3&&setTimeout((function(){t.initPlugin()}),3e3)},cbConnectClose:function(){t.oWebControl=null}})},getUrl:function(){this.videoUrlList=[{cameraIndexCode:"1",streamMode:0,cameraName:"指挥中心",url:"rtsp://wowzaec2demo.streamlock.net/vod/mp4:BigBuckBunny_115k.mp4",deviceType:4,smallEagleEyeAbility:0,gpuMode:0,wndId:1}],this.initPlugin()},handleClose:function(){var t=this;this.$emit("close"),this.initCount=0;try{this.oWebControl&&(this.oWebControl.JS_HideWnd(),this.oWebControl.JS_Disconnect().then((function(){}),(function(){}))),setTimeout((function(){t.oWebControl=null}),500)}catch(n){}}}},r=s,l=(e("942f"),e("2877")),c=Object(l["a"])(r,o,i,!1,null,"2d38fec8",null);n["default"]=c.exports},"942f":function(t,n,e){"use strict";e("58bd")}}]);